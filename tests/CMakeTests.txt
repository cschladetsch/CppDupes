cmake_minimum_required(VERSION 3.10)

# Project setup
project(fsf)

# Enable testing
enable_testing()

# Add Google Test
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

# Add main project sources
add_executable(fsf_main src/main.cpp)

# Add test sources
file(GLOB TEST_SOURCES tests/*.cpp)
add_executable(fsf_tests ${TEST_SOURCES})
target_link_libraries(fsf_tests ${GTEST_LIBRARIES} pthread)

# Add tests to CTest
target_include_directories(fsf_tests PRIVATE ${CMAKE_SOURCE_DIR}/include)
add_test(NAME GoogleTest COMMAND fsf_tests)

